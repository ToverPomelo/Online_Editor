<!DOCTYPE html>
<html>
<head>
    <link type="text/css" rel="stylesheet" href="css/IDE.css">
        <script type="text/javascript" src="js/IDE.js"></script>

<script type="text/javascript" src="https://cdn.bootcss.com/FileSaver.js/2014-11-29/FileSaver.js" charset="utf-8"></script>
<script src="./../javascripts/ace/ace.js" type="text/javascript" charset="utf-8"></script>
<script src="./../javascripts/ace/ext-language_tools.js" type="text/javascript" charset="utf-8"></script>
<script src="./../javascripts/main.js" type="text/javascript" charset="utf-8"></script>

  <!-- 引入JQuery -->
  <script type="text/javascript" src="./../javascripts/easyui/jquery.min.js"></script>
  <!-- 引入EasyUI -->
  <script type="text/javascript" src="./../javascripts/easyui/jquery.easyui.min.js"></script>
  <!-- 引入EasyUI的中文国际化js，让EasyUI支持中文 -->
  <script type="text/javascript" src="./../javascripts/easyui/locale/easyui-lang-zh_CN.js"></script>
  <!-- 引入EasyUI的样式文件-->
  <link rel="stylesheet" href="./../javascripts/easyui/themes/dark-hive/easyui.css" type="text/css"/>
  <!-- 引入EasyUI的图标样式文件-->
  <link rel="stylesheet" href="./../javascripts/easyui/themes/icon.css" type="text/css"/>
</head>
<body>
    <div id="IDE">
        <div id="Menu">
            <div id="LOGO"><a href="#">SCNU</a></div>
		<div class="menu-button">
			<div class="menu_item"><a href="#" class="easyui-menubutton" data-options="menu:'#mm1'">文件</a></div>
			<div class="menu_item"><a href="#" class="easyui-menubutton" data-options="menu:'#mm2'">编辑</a></div>
			<div class="menu_item"><a href="#" class="easyui-menubutton" data-options="menu:'#mm3'">视图</a></div>
			<div class="menu_item"><a href="#" class="easyui-menubutton" data-options="menu:'#mm4'">编辑器</a></div>
			<div class="menu_item"><a href="#" class="easyui-menubutton" data-options="menu:'#mm5'">运行</a></div>
			<div class="menu_item"><a href="#" class="easyui-menubutton" data-options="menu:'#mm6'">关于</a></div>
		</div>
		<div id="mm1" style="width:150px">
			<div>导入文件</div>
			<div>导出文件</div>
			<div>清空文件</div>
			<div>分享文件</div>
		</div>
		<div id="mm2" style="width:100px;">
			<div>代码缩进</div>
			<div>搜索与替换</div>
			<div>跳转</div>
		</div>
		<div id="mm3" style="width:100px;">
			<div>项目管理</div>
			<div>状态栏</div>
			<div>自动隐藏</div>
			<div>多窗口模式</div>
		</div>
		<div id="mm4" style="width:100px;">
			<div>gcc</div>
			<div>clang</div>
			<div>cl</div>
		</div>
		<div id="mm5" style="width:100px;">
			<div>编译</div>
			<div>运行</div>
			<div>编译运行</div>
			<div>调试</div>
		</div>
		<div id="mm6" class="menu-content" style="background:#f0f0f0;padding:10px;text-align:left">
			<img src="http://www.jeasyui.com/images/logo1.png" style="width:150px;height:50px">
			<p style="font-size:14px;color:#444;">Try jQuery EasyUI to build your modern, interactive, javascript applications.</p>
		</div>





        </div>
    <div>

        <div id="ProManager">

		<div id="PMrControler" class="easyui-tabs" style="width:245px;height:91%">
			<div title="文件管理" style="padding:10px" id="PMrfileTreeLb" onClick="PMrControling(1)">
				<div class="easyui-panel" stytle="width:100%;height:100%">
					<ul class="easyui-tree">
						<li>
							<span>My Documents</span>
							<ul>
								<li data-options="state:'closed'">
									<span>Photos</span>
									<ul>
										<li>
											<span>Friend</span>
										</li>
										<li>
											<span>Wife</span>
										</li>
										<li>
											<span>Company</span>
										</li>
									</ul>
								</li>
								<li>
									<span>Program Files</span>
									<ul>
										<li>Intel</li>
										<li>Java</li>
										<li>Microsoft Office</li>
										<li>Games</li>
									</ul>
								</li>
								<li>index.html</li>
								<li>about.html</li>
								<li>welcome.html</li>
							</ul>
						</li>
					</ul>
				</div>

			</div>
			<div title="项目元素" style="padding:10px" id="PMrESLb" onClick="PMrControling(2)">
				项目元素
			</div>
			<div title="调试查看" style="padding:10px" id="PMrgdbSELb" onClick="PMrControling(3)">
				调试查看
			</div>
		</div>



        </div>


<div id="EditorCon">
	<div style="margin:20px 0;">
		<a href="javascript:void(0)" class="easyui-linkbutton" onclick="$('#w').window('open')">Open</a>
	</div>
	<div id="w" class="easyui-window" title="New" data-options="iconCls:'icon-save'" style="width:600px;height:400px;padding:5px;" inline="true">
		<div class="easyui-layout" data-options="fit:true">
		<!--	<div data-options="region:'east',split:true" style="width:20%"></div>     -->
			<div data-options="region:'center'" style="padding:10px;" id="MainEditor">function foo(items) {
    var x = "All this is syntax highlighted";
    return x;
}

			</div>
			<div data-options="region:'south',border:false" style="text-align:right;padding:5px 0 0;">
				<a class="easyui-linkbutton" data-options="iconCls:'icon-ok'" href="javascript:void(0)" onclick="javascript:alert('ok')" style="width:80px">编译</a>
			</div>
		</div>
	</div>



 
<script>
    var language = "c_cpp";
    var theme = "terminal";
    var Range = require('ace/range').Range;      /*startRow,starrColumn,endRow,endColumn*/

    var editor = ace.edit("MainEditor");

    editor.setTheme("ace/theme/"+theme);
    editor.getSession().setMode("ace/mode/"+language);
    document.getElementById('MainEditor').style.fontSize='23px';   //set font size
    editor.getSession().setTabSize(2);            //set tab size
    editor.container.style.lineHeight = 1;        //set line height
    editor.renderer.updateFontSize();
    //ace.require("ace/ext/language_tools");
    editor.setOptions({
      enableBasicAutocompletion:true,
      enableSnippets:true,
      enableLiveAutocompletion:true
  });

  (function(){
  var input = document.querySelector('#input');
  if(input)
  input.addEventListener('change', function(e){getType(e)});

  })();




$(document).ready(function() {
    var moving = false;
    
    $("#w").window({
        onMove:function(left,top){
	    moving = true;
            //console.log(this.left+" - "+top);
	    var w=$("#EditorCon").width();//可视宽度
            var h=$("#EditorCon").height();//可视高度
            var width=$("#w").window("options").width;
            var height=$("#w").window("options").height;

            if(top<0){
                $("#w").window("resize",{top:0});
            }
            if((height+top)>h){
                $("#w").window("resize",{top:h-height});
            }
            if(left<0){
                $("#w").window("resize",{left:0});
            }
            if((width+left)>w){
                $("#w").window("resize",{left:w-width});
            }
	    
	    moving = false;
        },
        onResize:function(width, height){
	    if(moving){return;}	  //onResize与onMove会互作  

	    var w=$("#EditorCon").width();//可视宽度
            var h=$("#EditorCon").height();//可视高度
            var left=$("#w").window("options").left;
            var top=$("#w").window("options").top;

            if(top<0){
                $("#w").window("resize",{height:height+top,top:0});
            }
            if((height+top)>h){
                $("#w").window("resize",{height:h-top});
            }
            if(left<0){
                $("#w").window("resize",{width:width+left,left:0});
            }
            if((width+left)>w){
                $("#w").window("resize",{width:w-left});
            }
        }
    });
    
});


	
</script>

</div>


    </div>
    </div>
</body>
