<!DOCTYPE html>
<html>
<head>
    <link type="text/css" rel="stylesheet" href="css/IDE.css">
        <script type="text/javascript" src="js/IDE.js"></script>

<script type="text/javascript" src="https://cdn.bootcss.com/FileSaver.js/2014-11-29/FileSaver.js" charset="utf-8"></script>
<script src="./../javascripts/ace/ace.js" type="text/javascript" charset="utf-8"></script>
<script src="./../javascripts/ace/ext-language_tools.js" type="text/javascript" charset="utf-8"></script>
<script src="./../javascripts/main.js" type="text/javascript" charset="utf-8"></script>

  <!-- 引入JQuery -->
  <script type="text/javascript" src="./../javascripts/easyui/jquery.min.js"></script>
  <!-- 引入EasyUI -->
  <script type="text/javascript" src="./../javascripts/easyui/jquery.easyui.min.js"></script>
  <!-- 引入EasyUI的中文国际化js，让EasyUI支持中文 -->
  <script type="text/javascript" src="./../javascripts/easyui/locale/easyui-lang-zh_CN.js"></script>
  <!-- 引入EasyUI的样式文件-->
  <link rel="stylesheet" href="./../javascripts/easyui/themes/dark-hive/easyui.css" type="text/css"/>
  <!-- 引入EasyUI的图标样式文件-->
  <link rel="stylesheet" href="./../javascripts/easyui/themes/icon.css" type="text/css"/>
</head>
<body>
    <div id="IDE">
        <div id="Menu">
            <div id="LOGO"><a href="#">SCNU</a></div>
            <div class="menu_item" style="margin-left:24px;">
                <a href="#">文件◿</a>
                <ul>
                    <li><a href="#">导入文件</a></li>
                    <li><a href="#">导出文件</a></li>
                    <li><a href="#">清空文件</a></li>
                    <li><a href="#">分享文件</a></li>
                </ul>
            </div>
            <div class="menu_item">
                <a href="#">编辑◿</a>
                <ul>
                    <li><a href="#">代码缩进</a></li>
                    <li id="sar"><a href="#">搜索与替换</a></li>
                    <li><a href="#">跳转</a></li>
                </ul>
            </div>
            <div class="menu_item">
                <a href="#">视图◿</a>
                <ul>
                    <li><a href="#">项目管理</a></li>
                    <li><a href="#">状态栏</a></li>
                    <li><a href="#">自动隐藏</a></li>
                    <li><a href="#">多窗口模式</a></li>
                </ul>
            </div>
            <div class="menu_item">
                <a href="#">编译器◿</a>
                <ul>
                    <li><a href="#">gcc 4.81</a></li>
                    <li><a href="#">gcc 7.10</a></li>
                    <li><a href="#">clang 5.0</a></li>
                    <li><a href="#">clang 5.1</a></li>
                    <li><a href="#">cl 14.0</a></li>
                    <li><a href="#">cl 14.2</a></li>
                </ul>
            </div>
            <div class="menu_item">
                <a href="#">运行◿</a>
                <ul>
                    <li><a href="#">编译</a></li>
                    <li><a href="#">运行</a></li>
                    <li><a href="#">编译运行</a></li>
                    <li><a href="#">调试</a></li>
                </ul>
            </div>
        </div>
    <div>

        <div id="ProManager">
                <div id="PMrControler">
                    <hr/>
                    <center>
                        <a href="#" id="PMrfileTreeLb" onClick="PMrControling(1)">文件管理</a>
                        |
                        <a href="#" id="PMrESLb" onClick="PMrControling(2)">项目元素</a>
                        |
                        <a href="#" id="PMrgdbSELb" onClick="PMrControling(3)">调试查看</a>
                    </center>
                    <hr/>
                </div>
                <div id="PMrContainer">
                    <div class="PMrfileTree">
                        <ul class="tree treemenu">
                            <li class="tree-empty"><span class="toggler"></span><a href="#">Home</a></li>
                            <li class="tree-opened"><span class="toggler">Category</span>
                                <ul class="treemenu" style="display: block;">
                                    <li class="tree-closed"><span class="toggler"></span><a href="#">jQuery</a>
                                        <ul class="treemenu" style="display: none;">
                                            <li class="tree-empty"><span class="toggler"></span><a href="#">jQuery</a></li>
                                            <li class="tree-empty"><span class="toggler"></span><a href="#">jQuery UI</a></li>
                                            <li class="tree-empty"><span class="toggler"></span><a href="#">jQuery Mobile</a></li>
                                        </ul>
                                    </li>
                                    <li class="tree-opened"><span class="toggler"></span><a href="#">JavaScript</a>
                                        <ul class="treemenu" style="display: block;">
                                            <li class="tree-empty tree-opened"><span class="toggler"></span><a class="active" href="#">AngularJS</a></li>
                                            <li class="tree-empty"><span class="toggler"></span><a href="#">React</a></li>
                                            <li class="tree-empty"><span class="toggler"></span><a href="#">Backbone</a></li>
                                        </ul>
                                    </li>
                                    <li class="tree-empty"><span class="toggler"></span><a href="#suits">Golang</a></li>
                                </ul>
                            </li>
                            <li class="tree-closed"><span class="toggler"></span><a href="#about">About</a>
                                <ul class="treemenu" style="display: none;">
                                    <li class="tree-empty"><span class="toggler"></span><a href="#">Contact</a></li>
                                    <li class="tree-empty"><span class="toggler"></span><a href="#">Blog</a></li>
                                    <li class="tree-closed"><span class="toggler"></span><a href="#">Jobs</a>
                                        <ul class="treemenu" style="display: none;">
                                            <li class="tree-empty"><span class="toggler"></span><a href="#jobs1">Job 1</a></li>
                                            <li class="tree-empty"><span class="toggler"></span><a href="#jobs2">Job 2</a></li>
                                            <li class="tree-empty"><span class="toggler"></span><a href="#jobs3">Job 3</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
        </div>


<div id="EditorCon">
	<div style="margin:20px 0;">
		<a href="javascript:void(0)" class="easyui-linkbutton" onclick="$('#w').window('open')">Open</a>
	</div>
	<div id="w" class="easyui-window" title="New" data-options="iconCls:'icon-save'" style="width:500px;height:200px;padding:5px;" inline="true">
		<div class="easyui-layout" data-options="fit:true">
			<div data-options="region:'east',split:true" style="width:20%"></div>
			<div data-options="region:'center'" style="padding:10px;" id="MainEditor">function foo(items) {
    var x = "All this is syntax highlighted";
    return x;
}

			</div>
			<div data-options="region:'south',border:false" style="text-align:right;padding:5px 0 0;">
				<a class="easyui-linkbutton" data-options="iconCls:'icon-ok'" href="javascript:void(0)" onclick="javascript:alert('ok')" style="width:80px">编译</a>
			</div>
		</div>
	</div>



 
<script>
    var language = "c_cpp";
    var theme = "terminal";
    var Range = require('ace/range').Range;      /*startRow,starrColumn,endRow,endColumn*/

    var editor = ace.edit("MainEditor");

    editor.setTheme("ace/theme/"+theme);
    editor.getSession().setMode("ace/mode/"+language);
    document.getElementById('MainEditor').style.fontSize='26px';   //set font size
    editor.getSession().setTabSize(2);            //set tab size
    editor.container.style.lineHeight = 1;        //set line height
    editor.renderer.updateFontSize();
    //ace.require("ace/ext/language_tools");
    editor.setOptions({
      enableBasicAutocompletion:true,
      enableSnippets:true,
      enableLiveAutocompletion:true
  });

  (function(){
  var input = document.querySelector('#input');
  if(input)
  input.addEventListener('change', function(e){getType(e)});

  })();

//new:
  var sar = document.getElementById("sar");
  sar.addEventListener("click",function(){
    if(!document.getElementById("sarWin")){
      var newWindow = document.createElement("div");
      document.getElementById("EditorCon").appendChild(newWindow);
      newWindow.style.position = "absolute";
      newWindow.style.width = "100%";
      newWindow.style.height = "20%";
      newWindow.style.zIndex = 200001;
      newWindow.style.bottom = 0;
      newWindow.style.backgroundColor = "#4088AA88";
      newWindow.id = "sarWin";
      var sarWin = document.getElementById("sarWin");
      var div1 = document.createElement("div");
      var wordIP1 = document.createElement("input");
      sarWin.appendChild(div1);
      div1.appendChild(wordIP1);
      wordIP1.id = "Word_1";
    }
    else{
      var sarWin = document.getElementById("sarWin");
      sarRemove.parentNode.removeChild(sarWin);
    }
  })
//end new



$(document).ready(function() {
    var moving = false;
    
    $("#w").window({
        onMove:function(left,top){
	    moving = true;
            //console.log(this.left+" - "+top);
	    var w=$("#EditorCon").width();//可视宽度
            var h=$("#EditorCon").height();//可视高度
            var width=$("#w").window("options").width;
            var height=$("#w").window("options").height;

            if(top<0){
                $("#w").window("resize",{top:0});
            }
            if((height+top)>h){
                $("#w").window("resize",{top:h-height});
            }
            if(left<0){
                $("#w").window("resize",{left:0});
            }
            if((width+left)>w){
                $("#w").window("resize",{left:w-width});
            }
	    
	    moving = false;
        },
        onResize:function(width, height){
	    if(moving){return;}	  //onResize与onMove会互作  

	    var w=$("#EditorCon").width();//可视宽度
            var h=$("#EditorCon").height();//可视高度
            var left=$("#w").window("options").left;
            var top=$("#w").window("options").top;

            if(top<0){
                $("#w").window("resize",{height:height+top,top:0});
		console.log("He");
            }
            if((height+top)>h){
                $("#w").window("resize",{height:h-top});
            }
            if(left<0){
                $("#w").window("resize",{width:width+left,left:0});
		console.log("Hi");
            }
            if((width+left)>w){
                $("#w").window("resize",{width:w-left});
            }
        }
    });
    
});


	
</script>

</div>


    </div>
    </div>
</body>
